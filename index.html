<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>äºŒæ¬¡å…ƒæ‰‹æ¸¸è¿åŠ¿å®ˆæ’å®šå¾‹æ£€æµ‹ä»ª</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <style>
        /* åŸºç¡€æ ·å¼ä¸æ˜Ÿç©ºèƒŒæ™¯ */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: #fff;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* å°é¢é¡µ */
        .cover-page { text-align: center; animation: fadeIn 1s; }
        .cover-title {
            font-size: clamp(2em, 8vw, 3.5em);
            margin-bottom: 20px;
            background: linear-gradient(45deg, #D4A574, #FFD700, #B8860B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(212,165,116,0.6);
        }
        .cover-subtitle { font-size: 1.5em; color: #FFD700; margin-bottom: 40px; }
        .cover-emoji {
            font-size: 4em;
            margin: 30px 0;
            animation: pulse 2s infinite;
        }
        .start-btn {
            padding: 20px 60px;
            font-size: 1.3em;
            background: linear-gradient(45deg, #D4A574, #B8860B);
            border: none;
            border-radius: 15px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 30px 0;
            touch-action: manipulation;
        }
        .start-btn:hover { transform: scale(1.05); box-shadow: 0 0 30px rgba(212,165,116,0.8); }
        .terms-section {
            margin-top: 40px;
            padding: 25px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            font-size: 0.85em;
            color: #bbb;
            line-height: 1.6;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .terms-section strong { color: #FFD700; }
        .agreement-notice { color: #D4A574; font-weight: bold; margin-top: 15px; }

        /* æ¸¸æˆé€‰æ‹©é¡µ */
        .game-select-page {
            display: none;
            animation: fadeIn 1s;
        }
        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        .game-card {
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(12px);
            border-radius: 20px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            text-align: center;
            touch-action: manipulation;
        }
        .game-card:hover {
            transform: translateY(-5px);
            border-color: #D4A574;
            box-shadow: 0 15px 40px rgba(212,165,116,0.3);
        }
        .game-icon { font-size: 3em; margin-bottom: 15px; }
        .game-name { font-size: 1.5em; color: #FFD700; margin-bottom: 10px; }
        .game-desc { color: #bbb; font-size: 0.9em; line-height: 1.5; }

        /* é—®å·é¡µ */
        .survey-page { display: none; flex-direction: column; min-height: 600px; }
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #D4A574, #FFD700);
            width: 0%;
            transition: width 0.5s ease;
        }
        .progress-text { text-align: center; margin-bottom: 20px; color: #D4A574; font-size: 0.9em; }
        
        .card-container { position: relative; flex: 1; }
        .card {
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(12px);
            border-radius: 20px;
            padding: 30px 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            position: absolute;
            width: 100%;
            min-height: 450px;
            opacity: 0;
            transform: translateX(100px);
            transition: all 0.4s ease;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .card.active { opacity: 1; transform: translateX(0); pointer-events: all; }
        .card.prev { transform: translateX(-100px); }

        .card-header { display: flex; align-items: center; margin-bottom: 20px; padding: 0 10px; }
        .card-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #000;
            margin-right: 15px;
        }
        .card-title { font-size: 1.3em; color: #FFD700; }
        .card-content p { font-size: 1.1em; margin-bottom: 20px; color: #fff; padding: 0 10px; }

        .options { margin-bottom: 30px; }
        .options label {
            display: block;
            padding: 15px;
            margin: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            position: relative;
            font-size: 0.95em;
        }
        .options label:hover {
            background: rgba(212,165,116,0.15);
            border-color: rgba(212,165,116,0.5);
            transform: translateX(3px);
        }
        .options input[type="radio"] { display: none; }
        .options input[type="radio"]:checked + label {
            background: rgba(212,165,116,0.25);
            border-color: #D4A574;
        }
        .options input[type="radio"]:checked + label::after {
            content: "âœ“";
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #D4A574;
            font-weight: bold;
            font-size: 1.2em;
        }

        .slider-container {
            margin: 30px 10px;
            padding: 20px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .slider-label { font-size: 1.1em; margin-bottom: 15px; display: block; }
        .slider-value {
            text-align: center;
            font-size: 1.5em;
            color: #D4A574;
            margin-bottom: 15px;
            font-weight: bold;
        }
        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: rgba(255,255,255,0.1);
            outline: none;
            -webkit-appearance: none;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(45deg, #D4A574, #FFD700);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(212,165,116,0.8);
        }

        .card-nav {
            display: flex;
            gap: 15px;
            margin-top: auto;
            padding: 0 10px;
        }
        .card-nav button {
            flex: 1;
            padding: 12px 20px;
            border-radius: 10px;
            border: none;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            touch-action: manipulation;
        }
        .btn-prev {
            background: rgba(255,255,255,0.1);
            color: #fff;
        }
        .btn-prev:hover { background: rgba(255,255,255,0.2); }
        .btn-next, .btn-submit {
            background: linear-gradient(45deg, #D4A574, #B8860B);
            color: #000;
            font-weight: bold;
        }
        .btn-next:hover, .btn-submit:hover {
            transform: scale(1.02);
            box-shadow: 0 0 15px rgba(212,165,116,0.5);
        }
        .btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none !important;
        }

        /* ç»“æœé¡µ */
        .result-page { display: none; animation: fadeIn 1s; }
        .fortune-card {
            background: linear-gradient(135deg, rgba(0,0,0,0.4), rgba(212,165,116,0.1));
            border: 2px solid #D4A574;
            border-radius: 20px;
            padding: 30px 20px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 0 30px rgba(212,165,116,0.3);
        }
        .fortune-title { font-size: 2em; margin: 10px 0; color: #FFD700; }
        .fortune-level { font-size: 1.2em; color: #D4A574; margin-bottom: 20px; font-weight: bold; }
        .fortune-text { font-size: 1.1em; line-height: 1.6; margin-bottom: 30px; color: #fff; font-weight: 500; }
        .fortune-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }
        .good, .bad { padding: 15px; border-radius: 10px; }
        .good {
            background: rgba(76,175,80,0.2);
            border: 1px solid #4CAF50;
        }
        .bad {
            background: rgba(244,67,54,0.2);
            border: 1px solid #f44336;
        }
        .good h4, .bad h4 { margin: 0 0 10px 0; font-size: 1.1em; }
        .good ul, .bad ul { margin: 0; padding-left: 20px; list-style: none; }
        .good li:before { content: "âœ… "; }
        .bad li:before { content: "âŒ "; }

        /* ç»“æœé¡µæŒ‰é’®æ ·å¼ */
        .result-actions {
            display: flex;
            gap: 20px;
            margin-top: 30px;
            justify-content: center;
        }
        .result-actions button {
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            touch-action: manipulation;
        }
        .btn-restart {
            background: rgba(255,255,255,0.15);
            color: #fff;
        }
        .btn-restart:hover {
            background: rgba(255,255,255,0.25);
        }
        .btn-generate {
            background: linear-gradient(45deg, #D4A574, #B8860B);
            color: #000;
            font-weight: bold;
        }
        .btn-generate:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(212,165,116,0.5);
        }

        /* å¤å…¸ç«–æ’è¿åŠ¿ç­¾é¡µ */
        .fortune-image-page {
            display: none;
            animation: fadeIn 1s;
        }
        .fortune-image-container {
            position: relative;
            text-align: center;
        }
        .fortune-back-btn {
            position: absolute;
            top: -60px;
            left: 10px;
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(212,165,116,0.5);
            border-radius: 8px;
            color: #D4A574;
            cursor: pointer;
            transition: all 0.3s;
            touch-action: manipulation;
        }
        .fortune-back-btn:hover {
            background: rgba(212,165,116,0.2);
        }
        .fortune-image {
            display: block;
            max-width: 100%;
            height: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border-radius: 15px;
        }
        .save-image-btn {
            margin-top: 20px;
            padding: 12px 30px;
            background: linear-gradient(45deg, #4CAF50, #45a049);
            border: none;
            border-radius: 10px;
            color: #fff;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            touch-action: manipulation;
        }
        .save-image-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(76,175,80,0.5);
        }

        /* éšè—çš„è°ƒè¯•ä¿¡æ¯ */
        .debug-info {
            display: none;
            margin-top: 30px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            font-size: 0.8em;
            color: #a0a0a0;
            border: 1px dashed rgba(255,255,255,0.1);
        }

        /* å“åº”å¼ä¼˜åŒ– */
        @media (max-width: 600px) {
            .container { padding: 15px; }
            .card { padding: 25px 15px; min-height: 400px; }
            .cover-title { font-size: 2.5em; }
            .game-grid { grid-template-columns: 1fr; gap: 20px; }
            .fortune-details { grid-template-columns: 1fr; }
            .result-actions { flex-direction: column; gap: 15px; }
            .result-actions button { width: 100%; }
        }

        /* æ¸¸æˆç‰¹å®šä¸»é¢˜è‰² */
        .game-genshin .card-number { background: linear-gradient(45deg, #D4A574, #B8860B); }
        .game-arknights .card-number { background: linear-gradient(45deg, #FF6B6B, #C92A2A); }
        .game-hsr .card-number { background: linear-gradient(45deg, #4ECDC4, #2D8B85); }
    </style>
</head>
<body>
    <div class="container">
        <!-- ========== å°é¢é¡µ ========== -->
        <div id="coverPage" class="cover-page">
            <div class="cover-emoji">âš—ï¸</div>
            <h1 class="cover-title">äºŒæ¬¡å…ƒæ‰‹æ¸¸è¿åŠ¿å®ˆæ’å®šå¾‹æ£€æµ‹ä»ª</h1>
            <p class="cover-subtitle">ç§‘å­¦ç®—å‘½ï¼Œæœ€ä¸ºè‡´å‘½</p>
            
            <div class="terms-section">
                <p><strong>ğŸ“œ ç©å®¶é¡»çŸ¥ï¼š</strong></p>
                <p>1. æœ¬æ£€æµ‹ä»…ä¾›å¨±ä¹ï¼Œç»“æœåŸºäºè™šæ„ç®—æ³•ç”Ÿæˆ</p>
                <p>2. å…¨ç¨‹åŒ¿åï¼Œä¸æ”¶é›†ä»»ä½•è´¦å·ã€è®¾å¤‡æˆ–éšç§ä¿¡æ¯</p>
                <p>3. æ•°æ®ç”¨äºç»Ÿè®¡å­¦è¯¾ç¨‹ä½œä¸šï¼Œå·²åŒ¿ååŒ–å¤„ç†</p>
                <p>4. å®˜æ–¹æŠ½å¡æ¦‚ç‡è¯·ä»¥æ¸¸æˆå†…å…¬ç¤ºä¸ºå‡†</p>
                <p class="agreement-notice">
                    ç‚¹å‡»"å¼€å§‹æ£€æµ‹"å³ä»£è¡¨æ‚¨åŒæ„æˆ‘ä»¬çš„æ•°æ®ä½¿ç”¨æ¡æ¬¾ä¸éšç§æ”¿ç­–
                </p>
            </div>
            
            <button class="start-btn" onclick="showGameSelect()">ğŸ”® å¼€å§‹æ£€æµ‹</button>
        </div>

        <!-- ========== æ¸¸æˆé€‰æ‹©é¡µ ========== -->
        <div id="gameSelectPage" class="game-select-page" style="display:none;">
            <h1 class="cover-title">é€‰æ‹©ä½ çš„æ¸¸æˆä¸–ç•Œ</h1>
            <p class="cover-subtitle">ä¸åŒçš„ä¸–ç•Œï¼ŒåŒæ ·çš„ç„å­¦</p>
            
            <div class="game-grid">
                <div class="game-card" onclick="startGameSurvey('genshin')">
                    <div class="game-icon">ğŸ´</div>
                    <div class="game-name">åŸç¥</div>
                    <div class="game-desc">æç“¦ç‰¹å¤§é™†çš„æŠ½å¡ç§˜å¯†<br>å‘½ä¹‹åº§ä¸çº ç¼ ä¹‹ç¼˜çš„å®ˆæ’å®šå¾‹</div>
                </div>
                
                <div class="game-card" onclick="startGameSurvey('arknights')">
                    <div class="game-icon">ğŸ¦Š</div>
                    <div class="game-name">æ˜æ—¥æ–¹èˆŸ</div>
                    <div class="game-desc">æ³°æ‹‰ä¸–ç•Œçš„å¯»è®¿ä¹‹è°œ<br>å…¬æ‹›æ ‡ç­¾ä¸æºçŸ³æŠ€è‰ºçš„é‡å­çº ç¼ </div>
                </div>
                
                <div class="game-card" onclick="startGameSurvey('hsr')">
                    <div class="game-icon">ğŸŒŒ</div>
                    <div class="game-name">å´©åï¼šæ˜Ÿç©¹é“é“</div>
                    <div class="game-desc">æ˜Ÿç©¹åˆ—è½¦çš„è·ƒè¿å¥¥ç§˜<br>å…‰é”¥ä¸æ˜Ÿç¼çš„æ—¶ç©ºæ‚–è®º</div>
                </div>
            </div>
            
            <button class="btn btn-prev" onclick="backToCover()" style="margin-top: 40px;">â† è¿”å›</button>
        </div>

        <!-- ========== é—®å·é¡µ ========== -->
        <div id="surveyPage" class="survey-page" style="display:none;">
            <form name="game-fortune" netlify data-netlify="true" style="display:none;">
                <input type="hidden" name="game_type">
                <input type="hidden" name="answers">
                <input type="hidden" name="fortune_id">
                <input type="hidden" name="fortune_level">
                <input type="hidden" name="weekday">
                <input type="hidden" name="valid_sample">
                <input type="hidden" name="validation_issues">
                <input type="hidden" name="sincerity_score">
                <input type="hidden" name="suspicion_score">
                <input type="hidden" name="user_agent">
                <input type="hidden" name="timestamp">
            </form>

            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">1 / 9</div>

            <div class="card-container" id="cardContainer">
                <!-- åŠ¨æ€åŠ è½½æ¸¸æˆç‰¹å®šé—®å· -->
            </div>
        </div>

        <!-- ========== ç»“æœé¡µ ========== -->
        <div id="resultPage" class="result-page" style="display:none;">
            <div class="fortune-card">
                <div class="fortune-title" id="fortuneTitle"></div>
                <div class="fortune-level" id="fortuneLevel"></div>
                <div class="fortune-text" id="fortuneText"></div>
            </div>

            <div class="fortune-details" id="fortuneDetails"></div>

            <!-- æ“ä½œæŒ‰é’® -->
            <div class="result-actions">
                <button class="btn btn-restart" onclick="restart()">ğŸ”„ é‡æ–°æ£€æµ‹</button>
                <button class="btn btn-generate" onclick="showFortuneImage()">ğŸ“œ ç”Ÿæˆå¤å…¸è¿åŠ¿ç­¾</button>
            </div>

            <!-- éšè—çš„è°ƒè¯•ä¿¡æ¯ -->
            <div class="debug-info" id="debugInfo"></div>
        </div>

        <!-- ========== å¤å…¸ç«–æ’è¿åŠ¿ç­¾é¡µ ========== -->
        <div id="fortuneImagePage" class="fortune-image-page" style="display:none;">
            <div class="fortune-image-container">
                <button class="fortune-back-btn" onclick="backToResult()">â† è¿”å›ç»“æœ</button>
                <canvas id="fortuneCanvas" class="fortune-image" width="1080" height="1920"></canvas>
            </div>
            <button class="save-image-btn" onclick="saveFortuneImage()">ğŸ’¾ ä¿å­˜è¿åŠ¿ç­¾</button>
            <p style="font-size: 0.85em; color: #bbb; margin-top: 10px;">
                é•¿æŒ‰å›¾ç‰‡å¯åˆ†äº«åˆ°æœ‹å‹åœˆæˆ–å‘é€ç»™æœ‹å‹
            </p>
        </div>
    </div>

    <!-- QRCode.js åº“ -->
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    
    <script>
        // ========== æ¸¸æˆä¸“å±æ•°æ®åº“ï¼ˆå®Œæ•´ç‰ˆï¼‰==========
        const GAME_CONFIGS = {
            genshin: {
                name: 'åŸç¥',
                class: 'game-genshin',
                fortuneDatabase: {
                    'top-0': { title: 'ğŸŒŸ æ¬§çš‡é™„ä½“Â·å¤©ç†é’¦å®š', level: 'ä¸Šä¸Šç­¾', text: 'ä»Šæ—¥è¿åŠ¿çˆ†æ£šï¼å•æŠ½å‡ºå¥‡è¿¹ï¼Œåè¿å¿…å‡ºåŒé»„è›‹ï¼' },
                    'top-1': { title: 'ğŸ’ 648åœ£é—ç‰©Â·è‚¡ä¸œç‰¹æƒ', level: 'ä¸Šä¸Šç­¾', text: 'æç“¦ç‰¹å¤§é™†ä»Šæ—¥ä¸ºä½ è½¬åŠ¨ï¼æ­¦å™¨æ± å¿…ä¸æ­ªï¼' },
                    'good-0': { title: 'âœ¨ ç’ƒæœˆé¦–å¯ŒÂ·è´¢è¿äº¨é€š', level: 'ä¸Šç­¾', text: 'è´¢è¿+æŠ½å¡è¿åŒbuffï¼æœˆå¡åæŠ½å¡æœ‰éšè—åŠ æˆ' },
                    'good-1': { title: 'ğŸ€ é£èµ·åœ°æ¬§çš‡Â·ç„å­¦æœ‰æ•ˆ', level: 'ä¸Šç­¾', text: 'ç„å­¦åœ°ç‚¹åŠ æˆ50%ï¼é£èµ·åœ°å¤§æ©¡æ ‘ä¸‹è¯•è¯•' },
                    'good-2': { title: 'ğŸ² åè¿çœŸç”·äººÂ·ä¿åº•ä¿æŠ¤', level: 'ä¸Šç­¾', text: 'åè¿ä¿åº•æœºåˆ¶ä»Šå¤©ç‰¹åˆ«çµï¼å†²ä¸€å‘ï¼' },
                    'mid-0': { title: 'ğŸ“Š æç“¦ç‰¹å¹³å‡è„¸Â·ä¼—ç”Ÿå¹³ç­‰', level: 'ä¸­ç­¾', text: 'ä»Šæ—¥è¿åŠ¿=æœåŠ¡å™¨å¹³å‡å€¼ï¼Œå»ºè®®ä½›ç³»æŠ½å¡' },
                    'mid-1': { title: 'ğŸ­ æ™®é€šå¤©æ°”Â·æ— é£æ— æµª', level: 'ä¸­ç­¾', text: 'ä»Šå¤©é€‚åˆæ¸…æ ‘è„‚ï¼ŒæŠ½å¡å»ºè®®æ˜å¤©å†è¯´' },
                    'mid-2': { title: 'â˜¯ï¸ æ¬§éå®ˆæ’Â·åŠ¨æ€å¹³è¡¡', level: 'ä¸­ç­¾', text: 'ä»Šæ—¥éé…‹=æ˜æ—¥æ¬§çš‡ï¼Œå»ºè®®å‚¨è“„è¿åŠ¿' },
                    'bad-0': { title: 'ğŸ’€ 648åå‘ä¿æŠ¤Â·æ€ç†Ÿé¢„è­¦', level: 'ä¸‹ç­¾', text: 'ç³»ç»Ÿæ£€æµ‹åˆ°è‚¡ä¸œèº«ä»½ï¼Œæ¦‚ç‡-50%ï¼Œå»ºè®®ç™½å«–' },
                    'bad-1': { title: 'ğŸª¦ éé…‹è®¤è¯Â·ä»Šæ—¥ä¸å®œ', level: 'ä¸‹ç­¾', text: 'ä»Šæ—¥æŠ½å¡æˆåŠŸç‡0.01%ï¼Œå»ºè®®ç»™ä¸»æ’­ä¸Šä¾›' },
                    'worst-0': { title: 'â˜ ï¸ 648ç»ˆæéé…‹Â·å¤©ç†éš¾å®¹', level: 'ä¸‹ä¸‹ç­¾', text: 'ä»Šæ—¥æŠ½å¡=åŸçŸ³é”€æ¯å™¨ï¼Œå»ºè®®mhyç›´æ¥æ‰“é’±' }
                },
                goodPools: {
                    top: ['å•æŠ½å‡ºå¥‡è¿¹', '648æ¢­å“ˆ', 'æ­¦å™¨æ± è®¸æ„¿', 'é™å®šUP', 'å‘½åº§å†²åˆº'],
                    good: ['æœˆå¡åæŠ½', 'é£èµ·åœ°æŠ½å¡', 'é›¶ç‚¹åæŠ½', 'åè¿ä¿åº•', 'æ”’å¤Ÿ180æŠ½'],
                    mid: ['éšç¼˜å«åˆ€', 'åˆ·æœ¬æ”’åŸçŸ³', 'è§‚æœ›æ± å­', 'åšå§”æ‰˜', 'æ·éª°å­å†³å®š'],
                    bad: ['ä¸‹çº¿ä¿å¹³å®‰', 'ç­‰ä¸‹æ¬¡å¤åˆ»', 'çœ‹é£æ™¯', 'æ°¸ä¹…é€€å‘'],
                    worst: ['åˆ é™¤æ¸¸æˆ', 'ç»™ä¸»æ’­ä¸Šä¾›']
                },
                badPools: {
                    top: ['æ”’åŸçŸ³', 'çŠ¹è±«è§‚æœ›', 'é€€å‡ºæ¸¸æˆ'],
                    good: ['æ­£åˆæŠ½å¡', 'ç»§ç»­å›¤', 'æ­¦å™¨æ± '],
                    mid: ['æ°ªé‡‘æ¢­å“ˆ', 'å†²åŠ¨ä¸Šå¤´', 'ç„å­¦ä»ªå¼'],
                    bad: ['648æ°ªé‡‘', 'åè¿å†²', 'å«åˆ€'],
                    worst: ['æ°ªé‡‘', 'æŠ½å¡', 'å«åˆ€']
                },
                questions: [
                    {
                        title: 'å‘½ä¹‹åº§èŠ‚å¾‹æ£€æµ‹',
                        content: 'ä½ çš„"å‘½ä¹‹åº§"ä¸æç“¦ç‰¹å…±é¸£é¢‘ç‡æ˜¯ï¼Ÿ',
                        type: 'radio',
                        name: 'q1',
                        options: [
                            { value: '1', text: 'ã€å²©ã€‘æ¯å‘¨1-2æ¬¡ï¼ˆéšç¼˜å†¥æƒ³ï¼‰' },
                            { value: '2', text: 'ã€é£ã€‘æ¯å‘¨3-4æ¬¡ï¼ˆæ—¥å¸¸å·¡æ¸¸ï¼‰' },
                            { value: '3', text: 'ã€é›·ã€‘æ¯å‘¨5-6æ¬¡ï¼ˆæ·±åº¦å…±é¸£ï¼‰' },
                            { value: '4', text: 'ã€ç«ã€‘æ¯æ—¥ä¸Šçº¿ï¼ˆå…¨å‹¤æˆ˜ç¥ï¼‰' }
                        ]
                    },
                    {
                        title: 'æ˜Ÿè¾‰å¥‘çº¦çº¹ç« é‰´å®š',
                        content: 'ä½ çš„"å¥‘çº¦çº¹ç« "åœ¨æç“¦ç‰¹é“¶è¡Œç•™ä¸‹çš„å°è®°æ·±åº¦ï¼Ÿ',
                        type: 'radio',
                        name: 'q2',
                        options: [
                            { value: '0', text: 'ã€ç™½å«–ä¹‹è¯ã€‘0å…ƒï¼ˆå¤©ç†æ— éœ€äº¤æ˜“ï¼‰' },
                            { value: '1', text: 'ã€æœˆå¡ç¬¦æ–‡ã€‘6-98å…ƒï¼ˆå°é¢ä¾›å¥‰ï¼‰' },
                            { value: '2', text: 'ã€648åœ£ç—•ã€‘99-998å…ƒï¼ˆä¸­é¢çŒ®ç¥­ï¼‰' },
                            { value: '3', text: 'ã€è‚¡ä¸œçº¹ç« ã€‘999å…ƒ+ï¼ˆå¤§é™†æ°¸ä¹…äº§æƒï¼‰' }
                        ]
                    },
                    {
                        title: 'æ—¶ä¹‹æ²™æ¼åˆ»åº¦æ ¡å‡†',
                        content: 'è¿‡å»ä¸€ä¸ªæœˆï¼Œä½ çš„"æ—¶ä¹‹æ²™"åœ¨å“ªä¸ªåˆ»åº¦è½¬åŠ¨æœ€é¡ºæ»‘ï¼Ÿ',
                        type: 'radio',
                        name: 'q3',
                        options: [
                            { value: '1', text: 'ã€å­æ—¶ã€‘00:00-06:00ï¼ˆæ·±å¤œç„å­¦ï¼‰' },
                            { value: '2', text: 'ã€åˆæ—¶ã€‘12:00-14:00ï¼ˆæ­£åˆé˜³æ°”ï¼‰' },
                            { value: '3', text: 'ã€é…‰æ—¶ã€‘18:00-24:00ï¼ˆé»„æ˜è½¬è¿ï¼‰' },
                            { value: '4', text: 'ã€éšæœºã€‘çœ‹ç¼˜åˆ†ï¼ˆæ—¶ç©ºä¹±æµï¼‰' }
                        ]
                    },
                    {
                        title: 'ä¸ƒå¤©ç¥åƒå……èƒ½ç‡',
                        content: 'æœ€è¿‘7å¤©ï¼Œä½ çš„ç¥åƒå…±é¸£å›è·¯å®Œæ•´åº¦ï¼Ÿ',
                        type: 'slider',
                        name: 'q4',
                        min: 0,
                        max: 7,
                        default: 0,
                        suffix: 'å¤©'
                    },
                    {
                        title: 'åœ£é—ç‰©å…±é¸£ä»ªå¼',
                        content: 'æŠ½å¡å‰ï¼Œä½ é€šå¸¸ä¼šè¿›è¡Œå“ªç§åœ£é—ç‰©å…±é¸£ä»ªå¼ï¼Ÿ',
                        type: 'radio',
                        name: 'q5',
                        options: [
                            { value: '1', text: 'ã€æ•´ç†æ´¾ã€‘å°†èƒŒåŒ…æŒ‰æ˜Ÿçº§é¢œè‰²æ’åº' },
                            { value: '2', text: 'ã€ç„å­¦æ´¾ã€‘åœ¨é£èµ·åœ°è¿ç»­è·³è·ƒ7æ¬¡å†æŠ½' },
                            { value: '3', text: 'ã€ä»ªå¼æ´¾ã€‘ç”¨å·¦æ‰‹æ— åæŒ‡ç‚¹å‡»ç¥ˆæ„¿æŒ‰é’®' },
                            { value: '4', text: 'ã€æç«¯æ´¾ã€‘æ¯æ¬¡æŠ½å¡å‰å¸è½½é‡è£…æ¸¸æˆ' },
                            { value: '5', text: 'ã€ç°å®æ´¾ã€‘æ— æ‰€è°“ï¼Œç›´æ¥æŠ½' }
                        ]
                    },
                    {
                        title: 'å‘½å®šå€¼ç´¯ç§¯è¿›åº¦',
                        content: 'å½“å‰ä½ çš„"å‘½å®šå€¼"ç´¯ç§¯åˆ°å“ªä¸ªèŠ‚ç‚¹ï¼Ÿ',
                        type: 'radio',
                        name: 'q6',
                        options: [
                            { value: '1', text: '0-20æŠ½ï¼ˆåˆšé‡ç½®ï¼Œä»é›¶å¼€å§‹ï¼‰' },
                            { value: '2', text: '21-50æŠ½ï¼ˆå°å«å‡ æ‰‹ï¼‰' },
                            { value: '3', text: '51-75æŠ½ï¼ˆæ¥è¿‘ä¿åº•ï¼‰' },
                            { value: '4', text: '76-90æŠ½ï¼ˆå¤§ä¿åº•ä¸´ç•Œï¼‰' },
                            { value: '5', text: '90æŠ½+ï¼ˆå·²ç¡¬åƒä¿åº•ï¼‰' }
                        ]
                    },
                    {
                        title: 'æ˜Ÿè¾‰å›å“ä½™éŸµ',
                        content: 'ä¸Šæ¬¡"é‡‘è‰²ä¼ è¯´"çš„ä½™éŸµï¼Œè‡³ä»Šå›è¡äº†å¤šä¹…ï¼Ÿ',
                        type: 'radio',
                        name: 'q7',
                        options: [
                            { value: '1', text: '7å¤©å†…ï¼ˆæ˜¨æ—¥é‡ç°ï¼‰' },
                            { value: '2', text: '8-30å¤©ï¼ˆæœ¬å‘¨è®°å¿†ï¼‰' },
                            { value: '3', text: '31-90å¤©ï¼ˆä¸Šæœˆå°è®°ï¼‰' },
                            { value: '4', text: '90å¤©+ï¼ˆè¿œå¤åŒ–çŸ³ï¼‰' }
                        ]
                    },
                    {
                        title: 'å¤©ç†å›åº”å¥‘åˆåº¦',
                        content: 'ä¸Šæ¬¡5æ˜Ÿï¼Œä¸ä½ çš„å¿ƒæ„å¥‘åˆåº¦ï¼Ÿ',
                        type: 'radio',
                        name: 'q8',
                        options: [
                            { value: '1', text: 'ã€å®Œå…¨å¥‘åˆã€‘æ­£æ˜¯æˆ‘ç¥ˆæ„¿çš„é‚£ä½' },
                            { value: '2', text: 'ã€æ­ªäº†ä½†èƒ½ç”¨ã€‘ä¸æ˜¯ç›®æ ‡ä½†èƒ½æ¥å—' },
                            { value: '3', text: 'ã€ç»å…¸æ­ªäº†ã€‘ä¿åº•ç»™äº†å¸¸é©»/æ­¦å™¨' },
                            { value: '4', text: 'ã€æ²¡å°è±¡äº†ã€‘æ—¶é—´å¤ªä¹…è®°ä¸æ¸…' }
                        ]
                    },
                    {
                        title: 'åœ°è„‰è¿åŠ¿æŒ‡æ•°',
                        content: 'å¦‚æœç»™ä»Šå¤©çš„æŠ½å¡è¿æ°”æ‰“åˆ†ï¼ˆ0%=çº¯éé…‹ï¼Œ100%=æ¬§çš‡é™„ä½“ï¼‰',
                        type: 'slider',
                        name: 'q9',
                        min: 0,
                        max: 100,
                        default: 50,
                        suffix: '%'
                    }
                ]
            },
            arknights: {
                name: 'æ˜æ—¥æ–¹èˆŸ',
                class: 'game-arknights',
                fortuneDatabase: {
                    'top-0': { title: 'ğŸ¦Š å…­æ˜ŸçœŸé«“Â·é“¶ç°æ˜¾çµ', level: 'ä¸Šä¸Šç­¾', text: 'ä»Šæ—¥å¯»è®¿å¿…å‡ºå…­æ˜Ÿï¼å»ºè®®å•æŠ½ç„å­¦ï¼Œé“¶ç°ä¸ºä½ å¼€è·¯ï¼' },
                    'top-1': { title: 'ğŸ’ è‡³çº¯æºçŸ³Â·åˆ€å®¢å¡”ç¦éŸ³', level: 'ä¸Šä¸Šç­¾', text: 'æ³°æ‹‰å¤§é™†ä»Šæ—¥ä¸ºä½ å€¾æ–œï¼å…¬æ‹›å¿…å‡ºé«˜èµ„ï¼' },
                    'good-0': { title: 'âœ¨ é¾™é—¨å¸è¿åŠ¿Â·è´¢è¿MAX', level: 'ä¸Šç­¾', text: 'è´¢è¿+å¯»è®¿è¿åŒçˆ†å‘ï¼æœˆå¡åæŠ½å¡æœ‰éšè—UP' },
                    'good-1': { title: 'ğŸ¯ å…¬æ‹›åœ£æ‰‹Â·æ ‡ç­¾ç²¾å‡†', level: 'ä¸Šç­¾', text: 'å…¬æ‹›TAGåˆ·æ–°ç‡+50%ï¼é”å®šé«˜çº§èµ„æ·±å¹²å‘˜' },
                    'good-2': { title: 'ğŸ² åè¿ä¿åº•Â·é»„ç¥¨é¢„è­¦', level: 'ä¸Šç­¾', text: 'åè¿å¿…è§¦å‘ä¿åº•ï¼é»„ç¥¨å•†åº—ä»Šæ—¥æ‰“æŠ˜' },
                    'mid-0': { title: 'ğŸ“Š ç½—å¾·å²›å¹³å‡è„¸Â·ä¼—ç”Ÿå¹³ç­‰', level: 'ä¸­ç­¾', text: 'ä»Šæ—¥è¿åŠ¿=æœåŠ¡å™¨å¹³å‡å€¼ï¼Œå»ºè®®æ¸…ç†æ™º' },
                    'mid-1': { title: 'ğŸ­ æ™®é€šå¤©æ°”Â·æ— é£æ— æµª', level: 'ä¸­ç­¾', text: 'ä»Šå¤©é€‚åˆåˆ·èŠ¯ç‰‡ï¼Œå¯»è®¿å»ºè®®æ˜å¤©å†è¯´' },
                    'mid-2': { title: 'â˜¯ï¸ æ¬§éå®ˆæ’Â·åŠ¨æ€å¹³è¡¡', level: 'ä¸­ç­¾', text: 'ä»Šæ—¥éé…‹=æ˜æ—¥æ¬§çš‡ï¼Œå»ºè®®å­˜ç‰è§‚æœ›' },
                    'bad-0': { title: 'ğŸ’€ 258åå‘ä¿æŠ¤Â·æ€ç†Ÿé¢„è­¦', level: 'ä¸‹ç­¾', text: 'ç³»ç»Ÿæ£€æµ‹åˆ°æ°ªé‡‘ç—•è¿¹ï¼Œæ¦‚ç‡-50%ï¼Œå»ºè®®ç™½å«–' },
                    'bad-1': { title: 'ğŸª¦ éé…‹è®¤è¯Â·ä»Šæ—¥ä¸å®œ', level: 'ä¸‹ç­¾', text: 'ä»Šæ—¥å¯»è®¿æˆåŠŸç‡0.01%ï¼Œå»ºè®®ç»™ä¸»æ’­ä¸Šä¾›' },
                    'worst-0': { title: 'â˜ ï¸ æ°ªé‡‘ç»ˆæéé…‹Â·å·´åˆ«å¡”è¯…å’’', level: 'ä¸‹ä¸‹ç­¾', text: 'ä»Šæ—¥å¯»è®¿=åˆæˆç‰é»‘æ´ï¼Œå»ºè®®yjç›´æ¥æ‰“é’±' }
                },
                goodPools: {
                    top: ['å•æŠ½å¥‡è¿¹', '258å¯»è®¿', 'é™å®šæ± ', 'å…¬æ‹›é«˜èµ„', 'å…­æ˜Ÿå†²åˆº'],
                    good: ['æœˆå¡å¯»è®¿', 'å‡Œæ™¨4ç‚¹æŠ½', 'åè¿ä¿åº•', 'æ”’å¤Ÿ600ç‰', 'é»„ç¥¨å…‘æ¢'],
                    mid: ['éšç¼˜å…¬æ‹›', 'åˆ·æœ¬æ”’ç‰', 'è§‚æœ›ç€æ± å­', 'æ¸…ç†æ™º', 'æ·éª°å­å†³å®š'],
                    bad: ['ä¸‹çº¿ä¿å¹³å®‰', 'ç­‰ä¸‹æ¬¡å¤åˆ»', 'æ“ç‰', 'å†²åŠ¨æ¶ˆè´¹'],
                    worst: ['åˆ é™¤æ¸¸æˆ', 'ç»™ä¸»æ’­ä¸Šä¾›', 'æ°¸ä¹…é€€å‘']
                },
                badPools: {
                    top: ['æ”’ç‰è§‚æœ›', 'çŠ¹è±«å¾˜å¾Š', 'é€€å‡ºæ¸¸æˆ'],
                    good: ['æ­£åˆå¯»è®¿', 'ç»§ç»­å›¤', 'é™å®šæ± '],
                    mid: ['æ°ªé‡‘æ¢­å“ˆ', 'å†²åŠ¨ä¸Šå¤´', 'ç„å­¦ä»ªå¼'],
                    bad: ['258æ°ªé‡‘', 'åè¿å†²', 'å«åˆ€'],
                    worst: ['æ°ªé‡‘', 'å¯»è®¿', 'å«åˆ€']
                },
                questions: [
                    {
                        title: 'æ½œèƒ½å…±é¸£é¢‘ç‡æ£€æµ‹',
                        content: 'ä½ çš„"æ½œèƒ½"ä¸ç½—å¾·å²›åŒ»ç–—éƒ¨æ£€æµ‹åˆ°çš„ç¥ç»åŒæ­¥ç‡æ˜¯ï¼Ÿ',
                        type: 'radio',
                        name: 'q1',
                        options: [
                            { value: '1', text: 'ã€ä½é¢‘ã€‘æ¯å‘¨1-2æ¬¡ï¼ˆéšç¼˜å‡ºå‹¤ï¼‰' },
                            { value: '2', text: 'ã€ä¸­é¢‘ã€‘æ¯å‘¨3-4æ¬¡ï¼ˆå¸¸è§„è½®ç­ï¼‰' },
                            { value: '3', text: 'ã€é«˜é¢‘ã€‘æ¯å‘¨5-6æ¬¡ï¼ˆé‡åº¦ä¾èµ–ï¼‰' },
                            { value: '4', text: 'ã€å…¨é¢‘ã€‘æ¯æ—¥ä¸Šçº¿ï¼ˆå‡¯å°”å¸Œç›¯ä¸Šä½ äº†ï¼‰' }
                        ]
                    },
                    {
                        title: 'è‡³çº¯æºçŸ³çº¯åº¦é‰´å®š',
                        content: 'ä½ çš„"è‡³çº¯æºçŸ³"åœ¨ç½—å¾·å²›è´¢åŠ¡å¤„çš„æ¶ˆè´¹æ™¶æ ¼å±‚çº§ï¼Ÿ',
                        type: 'radio',
                        name: 'q2',
                        options: [
                            { value: '0', text: 'ã€é›¶æ°ªã€‘0å…ƒï¼ˆç†æ™ºè‡ªç„¶æ¢å¤ï¼‰' },
                            { value: '1', text: 'ã€æœˆå¡ã€‘6-98å…ƒï¼ˆç†æ™ºè¡¥å……å‰‚ï¼‰' },
                            { value: '2', text: 'ã€ç»„åˆåŒ…ã€‘99-998å…ƒï¼ˆåº”æ€¥ç†æ™ºé¡¶æ¶²ï¼‰' },
                            { value: '3', text: 'ã€å¤§è‚¡ä¸œã€‘999å…ƒ+ï¼ˆç½—å¾·å²›æ°¸ä¹…åˆä¼™äººï¼‰' }
                        ]
                    },
                    {
                        title: 'ç†æ™ºè¯å‰‚ä»£è°¢å‘¨æœŸ',
                        content: 'è¿‡å»ä¸€ä¸ªæœˆï¼Œä½ çš„"ç†æ™º"åœ¨å“ªä¸ªæ—¶æ®µæ¶ˆè€—æœ€é¡ºç•…ï¼Ÿ',
                        type: 'radio',
                        name: 'q3',
                        options: [
                            { value: '1', text: 'ã€å‡Œæ™¨ã€‘00:00-06:00ï¼ˆå¤œçŒ«å­åˆ€å®¢å¡”ï¼‰' },
                            { value: '2', text: 'ã€åˆåã€‘12:00-14:00ï¼ˆåˆä¼‘æ‘¸é±¼ï¼‰' },
                            { value: '3', text: 'ã€æ·±å¤œã€‘18:00-24:00ï¼ˆä¸‹ç­åçˆ†è‚ï¼‰' },
                            { value: '4', text: 'ã€éšç¼˜ã€‘çœ‹åŸºå»ºè®¾æ–½ï¼ˆæ—¶ç©ºæ—…è¡Œè€…ï¼‰' }
                        ]
                    },
                    {
                        title: 'åŸºå»ºé€ è®¿å®Œæ•´åº¦',
                        content: 'æœ€è¿‘7å¤©ï¼Œä½ çš„"åŸºå»ºè´¸æ˜“ç«™"è¿è½¬æ•ˆç‡ï¼Ÿ',
                        type: 'slider',
                        name: 'q4',
                        min: 0,
                        max: 7,
                        default: 0,
                        suffix: 'å¤©'
                    },
                    {
                        title: 'å…¬æ‹›ç„å­¦ä»ªå¼',
                        content: 'å¯»è®¿å‰ï¼Œä½ ä¼šåœ¨å…¬å¼€æ‹›å‹Ÿåˆ·å‡ºä»€ä¹ˆæ ‡ç­¾ç»„åˆï¼Ÿ',
                        type: 'radio',
                        name: 'q5',
                        options: [
                            { value: '1', text: 'ã€æ ‡ç­¾æ´¾ã€‘åˆ·å‡º"é«˜çº§èµ„æ·±å¹²å‘˜"ç«‹åˆ»å¯»è®¿' },
                            { value: '2', text: 'ã€æ—¶é—´æ´¾ã€‘åœ¨59åˆ†30ç§’æ—¶å¼€å§‹åè¿' },
                            { value: '3', text: 'ã€åœ°å›¾æ´¾ã€‘åœ¨åŸºå»ºç»•åœˆ3æ¬¡å†è¿›å¡æ± ' },
                            { value: '4', text: 'ã€é‡ç½®æ´¾ã€‘æ–­ç½‘é‡è¿åˆ·æ–°å¡æ± æ¦‚ç‡' },
                            { value: '5', text: 'ã€å®å¹²æ´¾ã€‘ä¸æ•´è™šçš„ï¼Œç›´æ¥æŠ½' }
                        ]
                    },
                    {
                        title: 'å¯»è®¿ä¿åº•å€’è®¡æ—¶',
                        content: 'å½“å‰ä½ çš„"å¯»è®¿æ•°æ®å¥‘çº¦"ç´¯ç§¯åˆ°å“ªä¸ªèŠ‚ç‚¹ï¼Ÿ',
                        type: 'radio',
                        name: 'q6',
                        options: [
                            { value: '1', text: '0-20æŠ½ï¼ˆå¥‘çº¦é‡ç½®ï¼‰' },
                            { value: '2', text: '21-50æŠ½ï¼ˆå«åˆ€è§‚æœ›ï¼‰' },
                            { value: '3', text: '51-70æŠ½ï¼ˆé»„ç¥¨é¢„è­¦ï¼‰' },
                            { value: '4', text: '71-99æŠ½ï¼ˆå…­æ˜Ÿä¸´ç•Œï¼‰' },
                            { value: '5', text: '100æŠ½+ï¼ˆå·²åƒæ»¡ä¿åº•ï¼‰' }
                        ]
                    },
                    {
                        title: 'å…­æ˜Ÿå›å“ä½™éŸµ',
                        content: 'ä¸Šæ¬¡"å…­æ˜Ÿå¹²å‘˜"å…¥èŒï¼Œè·ä»Šå¤šä¹…ï¼Ÿ',
                        type: 'radio',
                        name: 'q7',
                        options: [
                            { value: '1', text: '7å¤©å†…ï¼ˆæ–°é²œè¡€æ¶²ï¼‰' },
                            { value: '2', text: '8-30å¤©ï¼ˆè¿‘æœŸæˆ˜åŠ›ï¼‰' },
                            { value: '3', text: '31-90å¤©ï¼ˆè¿œå¤è®°å¿†ï¼‰' },
                            { value: '4', text: '90å¤©+ï¼ˆåšå£«ï¼Œè¿˜ä¸èƒ½ä¼‘æ¯å“¦ï¼‰' }
                        ]
                    },
                    {
                        title: 'é¾™é—¨å¸è¿åŠ¿å¥‘åˆåº¦',
                        content: 'ä¸Šæ¬¡6æ˜Ÿï¼Œæ˜¯ä½ æƒ³è¦çš„UPå¹²å‘˜å—ï¼Ÿ',
                        type: 'radio',
                        name: 'q8',
                        options: [
                            { value: '1', text: 'ã€ç²¾å‡†å‘½ä¸­ã€‘æ­£æ˜¯å¡æ± å°é¢é‚£ä½' },
                            { value: '2', text: 'ã€æ­ªäº†ä½†é¦™ã€‘ä¸æ˜¯UPä½†æ­ªåˆ°æ½œèƒ½' },
                            { value: '3', text: 'ã€ç»å…¸æ­ªäº†ã€‘å‡ºäº†å¸¸é©»å…­æ˜Ÿ' },
                            { value: '4', text: 'ã€å¤±å¿†åšå£«ã€‘å¿˜äº†ä¸Šæ¬¡å…­æ˜Ÿæ˜¯è°' }
                        ]
                    },
                    {
                        title: 'æºçŸ³æŠ€è‰ºå…±é¸£æŒ‡æ•°',
                        content: 'å¦‚æœç»™ä»Šå¤©çš„å¯»è®¿è¿æ°”æ‰“åˆ†ï¼ˆ0%=éæ´²åˆ€å®¢å¡”ï¼Œ100%=æ¬§çš‡åšå£«ï¼‰',
                        type: 'slider',
                        name: 'q9',
                        min: 0,
                        max: 100,
                        default: 50,
                        suffix: '%'
                    }
                ]
            },
            hsr: {
                name: 'å´©åï¼šæ˜Ÿç©¹é“é“',
                class: 'game-hsr',
                fortuneDatabase: {
                    'top-0': { title: 'ğŸŒŒ æ˜Ÿç¥ç¥ç¦Â·æ¬§çš‡è·ƒè¿', level: 'ä¸Šä¸Šç­¾', text: 'ä»Šæ—¥è·ƒè¿å¿…å‡ºäº”æ˜Ÿï¼å•æŠ½è¯•æ¢ï¼Œåè¿åŒé»„ä¸æ˜¯æ¢¦ï¼' },
                    'top-1': { title: 'ğŸ’ æ˜Ÿç©¹ä¸“åˆ—Â·æ— åå®¢ç‰¹æƒ', level: 'ä¸Šä¸Šç­¾', text: 'æ˜Ÿç©¹åˆ—è½¦ä»Šæ—¥ä¸ºä½ æ”¹é“ï¼å…‰é”¥æ± å¿…ä¸æ­ªï¼' },
                    'good-0': { title: 'âœ¨ æ˜Ÿé™…é¦–å¯ŒÂ·ä¿¡ç”¨ç‚¹çˆ†ç‚¸', level: 'ä¸Šç­¾', text: 'è´¢è¿+è·ƒè¿è¿åŒå¼•æ“ï¼å°æœˆå¡åæŠ½å¡æœ‰ç¥ä½‘' },
                    'good-1': { title: 'ğŸ¯ æ™ºåº“ç²¾å‡†Â·è¯æ¡åŒ¹é…', level: 'ä¸Šç­¾', text: 'æ¨¡æ‹Ÿå®‡å®™ä»Šæ—¥æ‰ç‡+50ï¼é”å®šé‡‘è‰²é—å™¨' },
                    'good-2': { title: 'ğŸ² åè¿è·ƒè¿Â·ä¿åº•å¿…å‡º', level: 'ä¸Šç­¾', text: 'åè¿ä¿åº•æœºåˆ¶ä»Šå¤©ç‰¹åˆ«çµï¼å…‰é”¥æ± å†²ä¸€å‘ï¼' },
                    'mid-0': { title: 'ğŸ“Š é»‘å¡”å¹³å‡è„¸Â·ä¼—ç”Ÿå¹³ç­‰', level: 'ä¸­ç­¾', text: 'ä»Šæ—¥è¿åŠ¿=ç©ºé—´ç«™å¹³å‡å€¼ï¼Œå»ºè®®åˆ·è¡Œè¿¹ææ–™' },
                    'mid-1': { title: 'ğŸ­ æ™®é€šå¤©æ°”Â·æ— é£æ— æµª', level: 'ä¸­ç­¾', text: 'ä»Šå¤©é€‚åˆåˆ·é—å™¨æœ¬ï¼Œè·ƒè¿å»ºè®®æ˜å¤©å†è¯´' },
                    'mid-2': { title: 'â˜¯ï¸ æ¬§éå®ˆæ’Â·åŠ¨æ€å¹³è¡¡', level: 'ä¸­ç­¾', text: 'ä»Šæ—¥éé…‹=æ˜æ—¥æ¬§çš‡ï¼Œå»ºè®®å­˜æ˜Ÿç¼è§‚æœ›' },
                    'bad-0': { title: 'ğŸ’€ 648åå‘ä¿æŠ¤Â·æ€ç†Ÿé¢„è­¦', level: 'ä¸‹ç­¾', text: 'ç³»ç»Ÿæ£€æµ‹åˆ°è‚¡ä¸œèº«ä»½ï¼Œæ¦‚ç‡-50%ï¼Œå»ºè®®ç™½å«–' },
                    'bad-1': { title: 'ğŸª¦ éé…‹è®¤è¯Â·ä»Šæ—¥ä¸å®œ', level: 'ä¸‹ç­¾', text: 'ä»Šæ—¥è·ƒè¿æˆåŠŸç‡0.01%ï¼Œå»ºè®®ç»™ä¸»æ’­ä¸Šä¾›' },
                    'worst-0': { title: 'â˜ ï¸ æ°ªé‡‘ç»ˆæéé…‹Â·æ˜Ÿç¥è¯…å’’', level: 'ä¸‹ä¸‹ç­¾', text: 'ä»Šæ—¥è·ƒè¿=æ˜Ÿç¼é»‘æ´ï¼Œå»ºè®®mhyç›´æ¥æ‰“é’±' }
                },
                goodPools: {
                    top: ['å•æŠ½å¥‡è¿¹', '648è·ƒè¿', 'å…‰é”¥æ± ', 'é™å®šUP', 'æ˜Ÿé­‚å†²åˆº'],
                    good: ['æœˆå¡è·ƒè¿', 'æ·±å¤œæŠ½å¡', 'åè¿ä¿åº•', 'æ”’å¤Ÿ180æŠ½', 'æ˜ŸèŠ’å…‘æ¢'],
                    mid: ['éšç¼˜å«åˆ€', 'åˆ·æœ¬æ”’æ˜Ÿç¼', 'è§‚æœ›æ± å­', 'åˆ·è¡Œè¿¹', 'æ·éª°å­å†³å®š'],
                    bad: ['ä¸‹çº¿ä¿å¹³å®‰', 'ç­‰ä¸‹æ¬¡å¤åˆ»', 'åˆ·æ¨¡æ‹Ÿå®‡å®™', 'å†²åŠ¨æ¶ˆè´¹'],
                    worst: ['åˆ é™¤æ¸¸æˆ', 'ç»™ä¸»æ’­ä¸Šä¾›', 'æ°¸ä¹…é€€å‘']
                },
                badPools: {
                    top: ['æ”’æ˜Ÿç¼è§‚æœ›', 'çŠ¹è±«å¾˜å¾Š', 'é€€å‡ºæ¸¸æˆ'],
                    good: ['æ­£åˆè·ƒè¿', 'ç»§ç»­å›¤', 'å…‰é”¥æ± '],
                    mid: ['æ°ªé‡‘æ¢­å“ˆ', 'å†²åŠ¨ä¸Šå¤´', 'ç„å­¦ä»ªå¼'],
                    bad: ['648æ°ªé‡‘', 'åè¿å†²', 'å«åˆ€'],
                    worst: ['æ°ªé‡‘', 'è·ƒè¿', 'å«åˆ€']
                },
                questions: [
                    {
                        title: 'å‘½é€”å›å“é¢‘ç‡æ£€æµ‹',
                        content: 'ä½ çš„"å‘½é€”è¡Œè¿¹"ä¸æ˜Ÿç¥è§‚æµ‹åˆ°çš„å…±é¸£æ³¢é•¿æ˜¯ï¼Ÿ',
                        type: 'radio',
                        name: 'q1',
                        options: [
                            { value: '1', text: 'ã€ä½é€Ÿã€‘æ¯å‘¨1-2æ¬¡ï¼ˆéšç¼˜è·ƒè¿ï¼‰' },
                            { value: '2', text: 'ã€ä¸­é€Ÿã€‘æ¯å‘¨3-4æ¬¡ï¼ˆæ—¥å¸¸å·¡æ£€ï¼‰' },
                            { value: '3', text: 'ã€é«˜é€Ÿã€‘æ¯å‘¨5-6æ¬¡ï¼ˆæ˜Ÿé™…æ¼«æ¸¸ï¼‰' },
                            { value: '4', text: 'ã€å…‰é€Ÿã€‘æ¯æ—¥ä¸Šçº¿ï¼ˆå¸•å§†åˆ—è½¦é•¿ï¼‰' }
                        ]
                    },
                    {
                        title: 'æ˜Ÿç¼çº¯åº¦é‰´å®š',
                        content: 'ä½ çš„"æ˜Ÿç¼"åœ¨é»‘å¡”ç©ºé—´ç«™çš„äº¤æ˜“ä¿¡ç”¨ç­‰çº§ï¼Ÿ',
                        type: 'radio',
                        name: 'q2',
                        options: [
                            { value: '0', text: 'ã€é›¶æ°ªã€‘0ä¿¡ç”¨ç‚¹ï¼ˆå¼€æ‹“è€…è‡ªåŠ›æ›´ç”Ÿï¼‰' },
                            { value: '1', text: 'ã€åˆ—è½¦é€šç¥¨ã€‘6-98å…ƒï¼ˆå°é¢å¼€æ‹“åŸºé‡‘ï¼‰' },
                            { value: '2', text: 'ã€æ— åå®¢ç¤¼é‡ã€‘99-998å…ƒï¼ˆä¸­é¢è·ƒè¿åè®®ï¼‰' },
                            { value: '3', text: 'ã€æ˜Ÿé™…å¤§äº¨ã€‘999å…ƒ+ï¼ˆæ˜Ÿç©¹åˆ—è½¦æ°¸ä¹…åŒ…å¢ï¼‰' }
                        ]
                    },
                    {
                        title: 'å¼€æ‹“åŠ›æ¶ˆè€—å‘¨æœŸ',
                        content: 'è¿‡å»ä¸€ä¸ªæœˆï¼Œä½ çš„"å¼€æ‹“åŠ›"åœ¨å“ªä¸ªæ˜Ÿå†æ—¶æ®µæœ€æ´»è·ƒï¼Ÿ',
                        type: 'radio',
                        name: 'q3',
                        options: [
                            { value: '1', text: 'ã€å­æ—¶ã€‘00:00-06:00ï¼ˆæ·±å¤œè·ƒè¿ï¼‰' },
                            { value: '2', text: 'ã€åˆæ—¶ã€‘12:00-14:00ï¼ˆåˆä¼‘å¼€æ‹“ï¼‰' },
                            { value: '3', text: 'ã€æˆŒæ—¶ã€‘19:00-24:00ï¼ˆé»„é‡‘è·ƒè¿çª—å£ï¼‰' },
                            { value: '4', text: 'ã€æ—¶åºé”™ä¹±ã€‘çœ‹å¸•å§†å¿ƒæƒ…ï¼ˆæ—¶åºç´Šä¹±ï¼‰' }
                        ]
                    },
                    {
                        title: 'æ™ºåº“è®¿é—®å®Œæ•´åº¦',
                        content: 'æœ€è¿‘7å¤©ï¼Œä½ çš„"æ¨¡æ‹Ÿå®‡å®™"æ¢ç´¢è¿›åº¦ï¼Ÿ',
                        type: 'slider',
                        name: 'q4',
                        min: 0,
                        max: 7,
                        default: 0,
                        suffix: 'å¤©'
                    },
                    {
                        title: 'è·ƒè¿ç„å­¦ä»ªå¼',
                        content: 'è·ƒè¿å‰ï¼Œä½ ä¼šè¿›è¡Œå“ªç§å¼€æ‹“ä»ªå¼ï¼Ÿ',
                        type: 'radio',
                        name: 'q5',
                        options: [
                            { value: '1', text: 'ã€åˆ—è½¦æ´¾ã€‘åœ¨åˆ—è½¦é•¿å®¤ç»•3åœˆå†è·ƒè¿' },
                            { value: '2', text: 'ã€æ™ºåº“æ´¾ã€‘å…ˆè¯»3éæ™ºåº“è¯æ¡å†æŠ½å¡' },
                            { value: '3', text: 'ã€å¸•å§†æ´¾ã€‘æŠšæ‘¸å¸•å§†5æ¬¡å†ç‚¹è·ƒè¿' },
                            { value: '4', text: 'ã€é‡ç½®æ´¾ã€‘æ¯æ¬¡è·ƒè¿å‰é‡å¯æ¸¸æˆ' },
                            { value: '5', text: 'ã€å¼€æ‹“æ´¾ã€‘ä¸æè™šçš„ï¼Œç›´æ¥è·ƒè¿' }
                        ]
                    },
                    {
                        title: 'è·ƒè¿ä¿åº•å€’è®¡æ—¶',
                        content: 'å½“å‰ä½ çš„"è·ƒè¿æ¦‚ç‡æå‡"ç´¯ç§¯åˆ°å“ªä¸ªèŠ‚ç‚¹ï¼Ÿ',
                        type: 'radio',
                        name: 'q6',
                        options: [
                            { value: '1', text: '0-20æŠ½ï¼ˆä¿åº•é‡ç½®ï¼‰' },
                            { value: '2', text: '21-50æŠ½ï¼ˆè½»åº¦å«åˆ€ï¼‰' },
                            { value: '3', text: '51-70æŠ½ï¼ˆæ¦‚ç‡æå‡é˜¶æ®µï¼‰' },
                            { value: '4', text: '71-79æŠ½ï¼ˆäº”æ˜Ÿä¸´ç•Œï¼‰' },
                            { value: '5', text: '80æŠ½+ï¼ˆå·²ç¡¬åƒå¤§ä¿åº•ï¼‰' }
                        ]
                    },
                    {
                        title: 'äº”æ˜Ÿå›å“ä½™éŸµ',
                        content: 'ä¸Šæ¬¡"äº”æ˜Ÿè§’è‰²/å…‰é”¥"è·ƒè¿æˆåŠŸï¼Œè·ä»Šå¤šä¹…ï¼Ÿ',
                        type: 'radio',
                        name: 'q7',
                        options: [
                            { value: '1', text: '7å¤©å†…ï¼ˆè·ƒè¿å›å“æ¸…æ™°ï¼‰' },
                            { value: '2', text: '8-30å¤©ï¼ˆè¿‘æœŸè·ƒè¿è®°å½•ï¼‰' },
                            { value: '3', text: '31-90å¤©ï¼ˆå†å²è·ƒè¿æ¡£æ¡ˆï¼‰' },
                            { value: '4', text: '90å¤©+ï¼ˆè·ƒè¿é»‘æ´æœŸï¼‰' }
                        ]
                    },
                    {
                        title: 'æ˜Ÿç¥çœ·é¡¾å¥‘åˆåº¦',
                        content: 'ä¸Šæ¬¡äº”æ˜Ÿï¼Œæ˜¯ä½ ç¥ˆæ„¿çš„UPç›®æ ‡å—ï¼Ÿ',
                        type: 'radio',
                        name: 'q8',
                        options: [
                            { value: '1', text: 'ã€å®Œç¾åŒ¹é…ã€‘æ­£æ˜¯æˆ‘è·ƒè¿çš„é‚£ä½' },
                            { value: '2', text: 'ã€æ­ªäº†ä½†å¼ºã€‘ä¸æ˜¯UPä½†æ­ªåˆ°å¼ºåŠ›è§’è‰²' },
                            { value: '3', text: 'ã€ç»å…¸æ­ªäº†ã€‘ä¿åº•ç»™äº†å¸¸é©»/å…‰é”¥' },
                            { value: '4', text: 'ã€è·ƒè¿å¤±å¿†ã€‘å¿˜äº†ä¸Šæ¬¡äº”æ˜Ÿæ˜¯å•¥' }
                        ]
                    },
                    {
                        title: 'å¼€æ‹“å‘½é€”æŒ‡æ•°',
                        content: 'å¦‚æœç»™ä»Šå¤©çš„è·ƒè¿è¿æ°”æ‰“åˆ†ï¼ˆ0%=æ˜Ÿé™…éš¾æ°‘ï¼Œ100%=æ˜Ÿç¥åŒ–èº«ï¼‰',
                        type: 'slider',
                        name: 'q9',
                        min: 0,
                        max: 100,
                        default: 50,
                        suffix: '%'
                    }
                ]
            }
        };

        // ========== å…¨å±€å˜é‡ ==========
        let currentCard = 1;
        const totalCards = 9;
        let currentGame = '';
        let currentGameConfig = null;
        let currentFortuneId = '';
        let currentFortuneData = null;
        let currentGoodBad = null;

        // ========== é¡µé¢å¯¼èˆª ==========
        function showGameSelect() {
            document.getElementById('coverPage').style.display = 'none';
            document.getElementById('gameSelectPage').style.display = 'block';
        }

        function backToCover() {
            document.getElementById('gameSelectPage').style.display = 'none';
            document.getElementById('coverPage').style.display = 'block';
        }

        function startGameSurvey(gameType) {
            currentGame = gameType;
            currentGameConfig = GAME_CONFIGS[gameType];
            
            document.getElementById('gameSelectPage').style.display = 'none';
            const surveyPage = document.getElementById('surveyPage');
            surveyPage.style.display = 'flex';
            surveyPage.className = `survey-page ${currentGameConfig.class}`;
            
            setTimeout(() => {
                loadGameQuestions();
                updateProgress();
                updateButtons();
            }, 100);
        }

        function loadGameQuestions() {
            const container = document.getElementById('cardContainer');
            container.innerHTML = '';
            
            const questions = currentGameConfig.questions;
            questions.forEach((q, index) => {
                const card = document.createElement('div');
                card.className = `card ${index === 0 ? 'active' : ''}`;
                card.setAttribute('data-card', index + 1);
                
                const cardHeader = document.createElement('div');
                cardHeader.className = 'card-header';
                cardHeader.innerHTML = `
                    <div class="card-number">${index + 1}</div>
                    <div class="card-title">${q.title}</div>
                `;
                
                const cardContent = document.createElement('div');
                cardContent.className = 'card-content';
                cardContent.innerHTML = `<p>${q.content}</p>`;
                
                if (q.type === 'radio') {
                    const optionsDiv = document.createElement('div');
                    optionsDiv.className = 'options';
                    q.options.forEach(opt => {
                        const input = document.createElement('input');
                        input.type = 'radio';
                        input.id = `${q.name}_${opt.value}`;
                        input.name = q.name;
                        input.value = opt.value;
                        input.onchange = () => enableNext(index + 1);
                        
                        const label = document.createElement('label');
                        label.htmlFor = `${q.name}_${opt.value}`;
                        label.textContent = opt.text;
                        
                        optionsDiv.appendChild(input);
                        optionsDiv.appendChild(label);
                    });
                    cardContent.appendChild(optionsDiv);
                } else if (q.type === 'slider') {
                    const sliderDiv = document.createElement('div');
                    sliderDiv.className = 'slider-container';
                    sliderDiv.innerHTML = `
                        <label class="slider-label" for="${q.name}">${q.title}</label>
                        <div class="slider-value" id="${q.name}Value">${q.default}${q.suffix}</div>
                    `;
                    
                    const slider = document.createElement('input');
                    slider.type = 'range';
                    slider.id = q.name;
                    slider.name = q.name;
                    slider.className = 'slider';
                    slider.min = q.min;
                    slider.max = q.max;
                    slider.value = q.default;
                    slider.oninput = () => updateSliderValue(q.name, `${q.name}Value`, q.suffix);
                    
                    sliderDiv.appendChild(slider);
                    cardContent.appendChild(sliderDiv);
                }
                
                const cardNav = document.createElement('div');
                cardNav.className = 'card-nav';
                
                const prevBtn = document.createElement('button');
                prevBtn.className = 'btn btn-prev';
                prevBtn.textContent = 'â† ä¸Šä¸€é¢˜';
                prevBtn.disabled = index === 0;
                if (index > 0) prevBtn.onclick = prevCard;
                
                const nextBtn = document.createElement('button');
                if (index < totalCards - 1) {
                    nextBtn.className = 'btn btn-next';
                    nextBtn.textContent = 'ä¸‹ä¸€é¢˜ â†’';
                    nextBtn.disabled = true;
                    nextBtn.onclick = nextCard;
                } else {
                    nextBtn.className = 'btn btn-submit';
                    nextBtn.textContent = 'ğŸ”® ç”Ÿæˆè¿åŠ¿ç­¾';
                    nextBtn.onclick = submitSurvey;
                }
                
                cardNav.appendChild(prevBtn);
                cardNav.appendChild(nextBtn);
                
                card.appendChild(cardHeader);
                card.appendChild(cardContent);
                card.appendChild(cardNav);
                
                container.appendChild(card);
            });
        }

        function updateSliderValue(sliderId, valueId, suffix) {
            const slider = document.getElementById(sliderId);
            const valueDisplay = document.getElementById(valueId);
            valueDisplay.textContent = slider.value + suffix;
            enableNext(currentCard);
        }

        function enableNext(cardNum) {
            const cardEl = document.querySelector(`[data-card="${cardNum}"]`);
            const nextBtn = cardEl.querySelector('.btn-next, .btn-submit');
            if (nextBtn) nextBtn.disabled = false;
            updateButtons();
        }

        function nextCard() {
            if (currentCard < totalCards) {
                const currentCardEl = document.querySelector(`[data-card="${currentCard}"]`);
                currentCardEl.classList.remove('active');
                currentCardEl.classList.add('prev');
                
                currentCard++;
                const nextCardEl = document.querySelector(`[data-card="${currentCard}"]`);
                nextCardEl.classList.add('active');
                
                updateProgress();
                updateButtons();
            }
        }

        function prevCard() {
            if (currentCard > 1) {
                const currentCardEl = document.querySelector(`[data-card="${currentCard}"]`);
                currentCardEl.classList.remove('active');
                
                currentCard--;
                const prevCardEl = document.querySelector(`[data-card="${currentCard}"]`);
                prevCardEl.classList.remove('prev');
                prevCardEl.classList.add('active');
                
                updateProgress();
                updateButtons();
            }
        }

        function updateProgress() {
            const progress = (currentCard / totalCards) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `${currentCard} / ${totalCards}`;
        }

        function updateButtons() {
            const cardEl = document.querySelector(`[data-card="${currentCard}"]`);
            if (!cardEl) return;
            
            let isAnswered = false;
            if (currentCard === 4) {
                isAnswered = document.getElementById('q4') && document.getElementById('q4').value !== '0';
            } else if (currentCard === 9) {
                isAnswered = true;
            } else {
                isAnswered = !!cardEl.querySelector('input[type="radio"]:checked');
            }
            
            const nextBtn = cardEl.querySelector('.btn-next, .btn-submit');
            if (nextBtn) nextBtn.disabled = !isAnswered;
            
            const prevBtn = cardEl.querySelector('.btn-prev');
            if (prevBtn) prevBtn.disabled = currentCard === 1;
        }

        function collectAnswers() {
            const answers = [];
            
            for (let i = 1; i <= 3; i++) {
                const selected = document.querySelector(`input[name="q${i}"]:checked`);
                if (!selected) { alert(`è¯·å›ç­”ç¬¬${i}é¢˜ï¼`); return null; }
                answers.push(selected.value);
            }
            
            const q4 = document.getElementById('q4');
            answers.push(q4 ? q4.value : '0');
            
            for (let i = 5; i <= 8; i++) {
                const selected = document.querySelector(`input[name="q${i}"]:checked`);
                if (!selected) { alert(`è¯·å›ç­”ç¬¬${i}é¢˜ï¼`); return null; }
                answers.push(selected.value);
            }
            
            const q9 = document.getElementById('q9');
            answers.push(q9 ? q9.value : '50');
            
            return answers;
        }

        function validateAnswers(answers) {
            const q1 = parseInt(answers[0]);
            const q4 = parseInt(answers[3]);
            const q6 = parseInt(answers[5]);
            const q7 = parseInt(answers[6]);
            const q8 = parseInt(answers[7]);
            const q9 = parseInt(answers[8]);
            const q5 = parseInt(answers[4]);
            
            const issues = [];
            const activityGap = Math.abs(q1 - Math.ceil(q4 / 2));
            if (activityGap >= 2) issues.push('è‡ªè¯„ä¸è¡Œä¸ºä¸¥é‡ä¸ç¬¦');
            
            if (q6 <= 2 && q7 >= 3) issues.push('ä¿åº•æ„ŸçŸ¥ä¸å‡ºè´§æ—¶é—´å†²çª');
            
            const objectiveLuck = (q7 <= 2 ? 0.3 : 0) + (q8 <= 2 ? 0.3 : 0);
            const perceptionGap = Math.abs(q9/100 - (1 - objectiveLuck));
            if (perceptionGap >= 0.5) issues.push('è®¤çŸ¥åå·®å¼‚å¸¸');
            
            const sincerityScore = (q5 === 3 || q5 === 4) ? 0 : 1;
            if (sincerityScore === 0) issues.push('æµ‹è°é™·é˜±è§¦å‘');
            
            return {
                valid: issues.length === 0,
                issues: issues,
                metrics: {
                    activity_gap: activityGap,
                    luck_perception_gap: perceptionGap.toFixed(2),
                    sincerity_score: sincerityScore,
                    suspicion_score: issues.length * 0.3 + (sincerityScore === 0 ? 0.5 : 0)
                }
            };
        }

        function getCurrentWeekday() {
            return new Date().getDay();
        }

        function hashString(str) {
            let hash = 5381;
            for (let i = 0; i < str.length; i++) {
                hash = (hash * 33) ^ str.charCodeAt(i);
            }
            return hash >>> 0;
        }

        function calculateFortune(answers) {
            const answerStr = answers.join(',');
            const weekday = getCurrentWeekday();
            const hash = hashString(answerStr + weekday + currentGame);
            const fortuneIndex = hash % 11;
            
            if (fortuneIndex < 2) return 'top-' + fortuneIndex;
            if (fortuneIndex < 5) return 'good-' + (fortuneIndex - 2);
            if (fortuneIndex < 8) return 'mid-' + (fortuneIndex - 5);
            if (fortuneIndex < 10) return 'bad-' + (fortuneIndex - 8);
            return 'worst-0';
        }

        function generateGoodBad(fortuneId, level) {
            if (level === 'ä¸Šä¸Šç­¾') return { good: ['è¯¸äº‹çš†å®œ'], bad: [] };
            if (level === 'ä¸‹ä¸‹ç­¾') return { good: [], bad: ['è¯¸äº‹ä¸å®œ'] };
            
            const hash = hashString(fortuneId + currentGame);
            const levelMap = { 'ä¸Šç­¾': 'good', 'ä¸­ç­¾': 'mid', 'ä¸‹ç­¾': 'bad' };
            const poolKey = levelMap[level] || 'mid';
            
            const goodPool = [...currentGameConfig.goodPools[poolKey]];
            const badPool = [...currentGameConfig.badPools[poolKey]];
            
            const good1 = goodPool[hash % goodPool.length];
            let good2 = goodPool[(hash * 7) % goodPool.length];
            if (good2 === good1) good2 = goodPool[(goodPool.indexOf(good1) + 1) % goodPool.length];
            
            const bad1 = badPool[hash % badPool.length];
            let bad2 = badPool[(hash * 13) % badPool.length];
            if (bad2 === bad1) bad2 = badPool[(badPool.indexOf(bad1) + 1) % badPool.length];
            
            return { good: [good1, good2], bad: [bad1, bad2] };
        }

        function showFortuneImage() {
            document.getElementById('resultPage').style.display = 'none';
            document.getElementById('fortuneImagePage').style.display = 'block';
            
            generateClassicalFortuneImage();
            
            if (/MicroMessenger/i.test(navigator.userAgent)) {
                setTimeout(() => {
                    alert('ğŸ’¡ åœ¨å¾®ä¿¡ä¸­å¯é•¿æŒ‰å›¾ç‰‡ç›´æ¥åˆ†äº«');
                }, 500);
            }
        }

        function backToResult() {
            document.getElementById('fortuneImagePage').style.display = 'none';
            document.getElementById('resultPage').style.display = 'block';
        }

        function generateClassicalFortuneImage() {
            const canvas = document.getElementById('fortuneCanvas');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            // æ¸…ç©ºç”»å¸ƒ
            ctx.clearRect(0, 0, width, height);
            
            // å¤å…¸çº¸å¼ èƒŒæ™¯ï¼ˆç±³è‰²ï¼‰
            ctx.fillStyle = '#f5e9c9';
            ctx.fillRect(0, 0, width, height);
            
            // æ·»åŠ ä¼ ç»Ÿçº¹ç†æ•ˆæœ
            ctx.globalAlpha = 0.1;
            for (let i = 0; i < 50; i++) {
                ctx.strokeStyle = '#8b4513';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(Math.random() * width, Math.random() * height);
                ctx.lineTo(Math.random() * width, Math.random() * height);
                ctx.stroke();
            }
            ctx.globalAlpha = 1;
            
            // è¾¹æ¡†ï¼ˆä¼ ç»Ÿçº¢è‰²ï¼‰
            ctx.strokeStyle = '#a52a2a';
            ctx.lineWidth = 8;
            ctx.strokeRect(30, 30, width - 60, height - 60);
            
            // å†…è¾¹æ¡†
            ctx.strokeStyle = '#8b4513';
            ctx.lineWidth = 2;
            ctx.strokeRect(50, 50, width - 100, height - 100);
            
            // ä¸»æ ‡é¢˜ï¼ˆä»å³å¾€å·¦ç«–æ’ï¼‰
            ctx.fillStyle = '#8b0000';
            ctx.font = 'bold 72px serif';
            ctx.textAlign = 'center';
            
            // ç«–æ’æ ‡é¢˜ï¼ˆç§»é™¤è¡¨æƒ…ç¬¦å·ï¼‰
            const titleChars = currentFortuneData.title.replace(/[^\u4e00-\u9fa5]/g, '');
            const titleX = width - 120;
            let titleY = 150;
            titleChars.split('').forEach(char => {
                ctx.fillText(char, titleX, titleY);
                titleY += 80;
            });
            
            // ç­‰çº§ï¼ˆçº¢è‰²å°ç« æ•ˆæœï¼‰
            ctx.fillStyle = '#8b0000';
            ctx.globalAlpha = 0.8;
            ctx.fillRect(width - 250, height - 250, 180, 180);
            ctx.globalAlpha = 1;
            ctx.fillStyle = '#f5e9c9';
            ctx.font = 'bold 36px serif';
            ctx.fillText(currentFortuneData.level, titleX - 30, height - 150);
            
            // ä¸»å†…å®¹åŒºåŸŸï¼ˆä»å³å¾€å·¦ç«–æ’ï¼‰
            ctx.fillStyle = '#2f1b14';
            ctx.font = '32px serif';
            ctx.textAlign = 'right';
            
            // å¤„ç†ç­¾æ–‡å†…å®¹ç«–æ’
            const content = currentFortuneData.text;
            const contentX = width - 280;
            let contentY = 300;
            
            // æŒ‰æ ‡ç‚¹åˆ†å‰²ä¸ºçŸ­å¥ç«–æ’
            const sentences = content.split(/[ï¼ã€‚]/);
            sentences.forEach(sentence => {
                if (sentence.trim()) {
                    sentence.split('').reverse().forEach(char => {
                        ctx.fillText(char, contentX, contentY);
                        contentY += 40;
                    });
                    contentY += 20; // å¥é—´é—´è·
                }
            });
            
            // é€‚å®œ/ä¸å®œäº‹é¡¹ï¼ˆå³ä¾§ç«–æ’ï¼‰
            ctx.fillStyle = '#2f1b14';
            ctx.font = 'bold 36px serif';
            ctx.fillText('å®œ', width - 450, 300);
            ctx.fillText('å¿Œ', width - 450, 600);
            
            ctx.font = '28px serif';
            ctx.fillStyle = '#4a7c59';
            let goodY = 350;
            currentGoodBad.good.forEach(item => {
                ctx.fillText(item, width - 480, goodY);
                goodY += 50;
            });
            
            ctx.fillStyle = '#a52a2a';
            let badY = 650;
            currentGoodBad.bad.forEach(item => {
                ctx.fillText(item, width - 480, badY);
                badY += 50;
            });
            
            // åº•éƒ¨è½æ¬¾ï¼ˆä¼ ç»Ÿæ ¼å¼ï¼‰
            ctx.fillStyle = '#8b4513';
            ctx.font = '24px serif';
            ctx.textAlign = 'left';
            ctx.fillText(`ä»Šæ—¥è¿åŠ¿ Â· ${currentGameConfig.name}`, 80, height - 120);
            
            ctx.font = '20px serif';
            const date = new Date();
            const dateStr = `${date.getFullYear()}å¹´${date.getMonth() + 1}æœˆ${date.getDate()}æ—¥`;
            ctx.fillText(dateStr, 80, height - 80);
            
            // ä¼ ç»Ÿå°ç« æ•ˆæœ
            ctx.fillStyle = '#a52a2a';
            ctx.globalAlpha = 0.7;
            ctx.beginPath();
            ctx.arc(150, height - 150, 50, 0, Math.PI * 2);
            ctx.fill();
            ctx.globalAlpha = 1;
            ctx.fillStyle = '#f5e9c9';
            ctx.font = 'bold 20px serif';
            ctx.textAlign = 'center';
            ctx.fillText('å·²', 150, height - 140);
            ctx.fillText('éªŒ', 150, height - 115);
            
            // è¾¹æ¡†è£…é¥°è§’èŠ±
            const drawCorner = (x, y) => {
                ctx.strokeStyle = '#a52a2a';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(x, y);
                ctx.lineTo(x + 30, y);
                ctx.moveTo(x, y);
                ctx.lineTo(x, y + 30);
                ctx.stroke();
            };
            
            drawCorner(50, 50);
            drawCorner(width - 50, 50);
            drawCorner(50, height - 50);
            drawCorner(width - 50, height - 50);
        }

        function showFortune(fortune, good, bad, answers, fortuneId, validation) {
            currentFortuneData = fortune;
            currentGoodBad = { good, bad };
            
            document.getElementById('surveyPage').style.display = 'none';
            document.getElementById('resultPage').style.display = 'block';
            
            document.getElementById('fortuneTitle').innerHTML = fortune.title;
            document.getElementById('fortuneLevel').textContent = `ã€Œ${fortune.level}ã€`;
            document.getElementById('fortuneText').textContent = fortune.text;
            
            const detailsHTML = `
                <div class="good">
                    <h4>âœ… ä»Šæ—¥é€‚å®œ</h4>
                    <ul>${good.map(item => `<li>${item}</li>`).join('')}</ul>
                </div>
                <div class="bad">
                    <h4>âŒ ä»Šæ—¥ä¸å®œ</h4>
                    <ul>${bad.map(item => `<li>${item}</li>`).join('')}</ul>
                </div>
            `;
            document.getElementById('fortuneDetails').innerHTML = detailsHTML;
            
            // ç”Ÿæˆè°ƒè¯•ä¿¡æ¯ï¼ˆé»˜è®¤éšè—ï¼‰
            const weekday = getCurrentWeekday();
            const weekdays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
            const qualityBadge = validation.metrics.sincerity_score === 1 ? 'âœ… æœ‰æ•ˆæ ·æœ¬' : 'âš ï¸ å¯ç–‘æ ·æœ¬';
            
            document.getElementById('debugInfo').innerHTML = `
                <p><strong>æ¸¸æˆç±»å‹ï¼š</strong>${currentGameConfig.name}</p>
                <p><strong>ç­”æ¡ˆåºåˆ—ï¼š</strong>${answers.join(' | ')}</p>
                <p><strong>è®¿é—®æ—¶é—´ï¼š</strong>æ˜ŸæœŸ${weekdays[weekday]}</p>
                <p><strong>ç­¾æ–‡IDï¼š</strong>${fortuneId}</p>
                <p><strong>æ ·æœ¬è´¨é‡ï¼š</strong>${qualityBadge}</p>
                <p><strong>å¯ç–‘åº¦ï¼š</strong>${(validation.metrics.suspicion_score * 100).toFixed(0)}%</p>
            `;
        }

        function submitSurvey() {
            const answers = collectAnswers();
            if (!answers) return;
            
            const validation = validateAnswers(answers);
            const fortuneId = calculateFortune(answers);
            currentFortuneId = fortuneId;
            const fortune = currentGameConfig.fortuneDatabase[fortuneId];
            const { good, bad } = generateGoodBad(fortuneId, fortune.level);
            
            showFortune(fortune, good, bad, answers, fortuneId, validation);
            submitToNetlify(answers, fortuneId, fortune.level, validation);
        }

        async function submitToNetlify(answers, fortuneId, fortuneLevel, validation) {
            const form = document.querySelector('form[name="game-fortune"]');
            
            form.game_type.value = currentGame;
            form.answers.value = JSON.stringify(answers);
            form.fortune_id.value = fortuneId;
            form.fortune_level.value = fortuneLevel;
            form.weekday.value = getCurrentWeekday();
            form.valid_sample.value = validation.valid;
            form.validation_issues.value = JSON.stringify(validation.issues);
            form.sincerity_score.value = validation.metrics.sincerity_score;
            form.suspicion_score.value = validation.metrics.suspicion_score;
            form.user_agent.value = navigator.userAgent;
            form.timestamp.value = new Date().toISOString();
            
            const formData = new FormData(form);
            
            try {
                const response = await fetch('/', {
                    method: 'POST',
                    body: formData,
                    headers: { 'Accept': 'application/json' }
                });
                if (response.ok) console.log('âœ… æ•°æ®å·²æˆåŠŸæäº¤åˆ°Netlify');
                else console.error('âŒ æäº¤å¤±è´¥:', response.status);
            } catch (error) {
                console.error('æäº¤é”™è¯¯:', error);
            }
        }

        function saveFortuneImage() {
            const canvas = document.getElementById('fortuneCanvas');
            const link = document.createElement('a');
            link.download = `å¤å…¸è¿åŠ¿ç­¾_${currentGameConfig.name}_${new Date().toISOString().split('T')[0]}.png`;
            link.href = canvas.toDataURL();
            link.click();
            
            if (/MicroMessenger/i.test(navigator.userAgent)) {
                alert('ğŸ’¡ åœ¨å¾®ä¿¡ä¸­å¯é•¿æŒ‰å›¾ç‰‡ç›´æ¥åˆ†äº«');
            }
        }

        function restart() {
            currentCard = 1;
            currentGame = '';
            currentGameConfig = null;
            currentFortuneId = '';
            currentFortuneData = null;
            currentGoodBad = null;
            
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.checked = false;
            });
            
            const slider4 = document.getElementById('q4');
            const slider9 = document.getElementById('q9');
            if (slider4) slider4.value = 0;
            if (slider9) slider9.value = 50;
            
            document.querySelectorAll('.card').forEach(card => {
                card.classList.remove('active', 'prev');
            });
            
            document.getElementById('fortuneImagePage').style.display = 'none';
            document.getElementById('resultPage').style.display = 'none';
            document.getElementById('surveyPage').style.display = 'none';
            document.getElementById('gameSelectPage').style.display = 'none';
            document.getElementById('coverPage').style.display = 'block';
        }

        // ========== å¾®ä¿¡æµè§ˆå™¨ä¼˜åŒ– ==========
        document.addEventListener('DOMContentLoaded', function() {
            document.body.addEventListener('touchmove', function(e) {
                if (e.target === document.body) {
                    e.preventDefault();
                }
            }, { passive: false });
            
            document.title = 'äºŒæ¬¡å…ƒæ‰‹æ¸¸è¿åŠ¿æ£€æµ‹';
        });
    </script>
</body>
</html>
